# SUNSUN的服务注册与发现组件

## 简介

一个简单的go语言的服务注册与发现组件，依据业务层A像中心注册自己的业务，业务层B像中心请求该业务，中心返回A的ip端口等信息的一个逻辑进行设计。通信采用的grpc框架，~~在0.1版本中还未实现的信息持久化将在后续基于redis实现，发现部分引入自助化的负载均衡，服务心跳检测，注册与发现部分组件解耦等...~~

在0.15版本中实现了注册发现部分解耦:解了但没完全解, 
心跳检测:利用了redis的过期时间,当客户端注册成功时中心会为其k设置一个过期时间(15s)，
而客户端会唤起一个协程定期(5s)向中心发送消息:我还活着!帮我更新一下信息!
redis的一些特性诸如过期处理让我不用去编写摘取之类的业务,很舒服.
但是redis的过期时间只针对于顶级k,这打破了我一开始想用hash实现的想法，感觉这样不是很利于后期的维护，可能之后会封装一些东西来实现hash的版本
然后是信息的持久化，写着写着，感觉一个服务注册与发现的组件，需要去做信息的持久化吗?????所有可以被申请到的服务都应该是'活的'.
目前的思路是分成两个流，一个'活'流(缓存),一个'死'流(数据)，这个节点宕掉了,重新启动,从数据中读取服务信息，能够接通的，就写入缓存.
接下来是编写发现部分的负载均衡

下一步是尝试基于redis的集群做一点中心集群相关的尝试

## 特点

没有特点

## 版本记录

- 0.15 2021/7/16

  部分变量名重订

  注册发现部分解耦
  
  数据持久化(虚假的持久化)

  心跳检测
  
- 0.1
  
  注册发现功能.

## ToDo

- 发现部分负载均衡
- ~~信息持久化~~
- ~~封装给其他业务层的接口~~
- ~~服务心跳检测~~

## 联系我

sunsunwork1112@163.com